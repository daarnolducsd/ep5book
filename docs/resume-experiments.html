<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 Resume Experiments | Econ5/Poli5D</title>
<meta name="author" content="David Arnold">
<meta name="description" content="6.1 Correspondence Studies   code {  background-color: #f1f1f1; } The motivation for this week's empirical application is the pervasive evidence of inequality in the labor market. For example,...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 6 Resume Experiments | Econ5/Poli5D">
<meta property="og:type" content="book">
<meta property="og:image" content="/images/geisel.jpg">
<meta property="og:description" content="6.1 Correspondence Studies   code {  background-color: #f1f1f1; } The motivation for this week's empirical application is the pervasive evidence of inequality in the labor market. For example,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 6 Resume Experiments | Econ5/Poli5D">
<meta name="twitter:description" content="6.1 Correspondence Studies   code {  background-color: #f1f1f1; } The motivation for this week's empirical application is the pervasive evidence of inequality in the labor market. For example,...">
<meta name="twitter:image" content="/images/geisel.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="include/webex.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Econ5/Poli5D</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Introduction</a></li>
<li class="book-part">Excel</li>
<li><a class="" href="college-instruction-experiments.html"><span class="header-section-number">1</span> College Instruction Experiments</a></li>
<li class="book-part">Stata</li>
<li><a class="" href="intergenerational-mobility.html"><span class="header-section-number">2</span> Intergenerational Mobility</a></li>
<li><a class="" href="discrimination-in-police-stops.html"><span class="header-section-number">3</span> Discrimination in Police Stops</a></li>
<li><a class="" href="classroom-technology.html"><span class="header-section-number">4</span> Classroom Technology</a></li>
<li><a class="" href="legacy-of-colonial-medicine.html"><span class="header-section-number">5</span> Legacy of Colonial Medicine</a></li>
<li class="book-part">R</li>
<li><a class="active" href="resume-experiments.html"><span class="header-section-number">6</span> Resume Experiments</a></li>
<li><a class="" href="the-rug-rat-race.html"><span class="header-section-number">7</span> The Rug Rat Race</a></li>
<li><a class="" href="automated-pollution-monitoring.html"><span class="header-section-number">8</span> Automated Pollution Monitoring</a></li>
<li><a class="" href="voting.html"><span class="header-section-number">9</span> Voting</a></li>
<li><a class="" href="unconditional-cash-transfers.html"><span class="header-section-number">10</span> Unconditional Cash Transfers</a></li>
<li><a class="" href="references-1.html">References</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="resume-experiments" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Resume Experiments<a class="anchor" aria-label="anchor" href="#resume-experiments"><i class="fas fa-link"></i></a>
</h1>
<div id="correspondence-studies" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Correspondence Studies<a class="anchor" aria-label="anchor" href="#correspondence-studies"><i class="fas fa-link"></i></a>
</h2>


<style>
code {
  background-color: #f1f1f1;
}
</style>
<p>The motivation for this week's empirical application is the pervasive evidence of inequality in the labor market. For example, Black workers are about twice as likely as white workers to be unemployed (Council of Economic Advisors, 1998). However, it is often difficult to isolate discrimination from employers as source of a given disparity. For example, some argue researchers do not have all factors that go into an employer's decision to hire a worker, therefore differences in hiring rates across different races could be due to these other factors that are unobserved.</p>
<p>This week we will be studying an extremely clever method for identifying discrimination in the labor market: resume audit studies, also known as correspondence studies. The paper we will be studying is Bertrand and Mullainathan (2004)<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Marianne Bertrand and Sendhil Mullainathan, &lt;span&gt;“Are Emily and Greg More Employable Than Lakisha and Jamal? A Field Experiment on Labor Market Discrimination,”&lt;/span&gt; &lt;em&gt;American Economic Review&lt;/em&gt; 94, no. 4 (2004): 991–1013.&lt;/p&gt;"><sup>8</sup></a></span> send fictitious resumes to help-wanted ads in Boston and Chicago. Their unique angle is that they manipulate the perception of race by altering the name on the resume:</p>
<ul>
<li><p>Examples of white-sounding names from the paper: Emily Walsh and Greg Baker</p></li>
<li><p>Examples of Black-sounding names from the paper: Lakisha Washington and Jamal Jones</p></li>
</ul>
<p>All other characteristics of the applicant (experience, education, job history) are randomized. They then compare callback rates (for an interview) between Black and white applicants.</p>
<p>Why is this design so clever? Well, all factors relevant for a job are held fixed by construction. Disparities in callback rates between races can no longer be "explained away" by other factors. The researchers themselves have generated these resumes. All factors are observed and similar between white and Black applicants by construction. Therefore, if you do find a disparity now, then this is very strong evidence for discrimination in the labor market.</p>
<p>Before getting to the data though, we need to learn how to use the program we will be studying for the rest of the book: R. At this point, we would also like to credit Kosuke Imai's Textbook: Quantitative Social Science: An Introduction, where this example is drawn from.<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Kosuke Imai, &lt;em&gt;Quantitative Social Science: An Introduction&lt;/em&gt; (Princeton University Press, 2018).&lt;/p&gt;"><sup>9</sup></a></span></p>
</div>
<div id="installing-rrstudio" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Installing R/RStudio<a class="anchor" aria-label="anchor" href="#installing-rrstudio"><i class="fas fa-link"></i></a>
</h2>
<p>In this course we will be using R and Rstudio. R and Rstudio will work together to perform data analysis. But why two programs instead of one?</p>
<p>R is the software that actually does all the work. It is the software that executes functions and gives you results. Rstudio is a software that provides a nice interface through which to use R. So basically, R is the actual machinery, Rstudio is there to improve your user experience. You don't strictly need Rstudio to use R, but it helps a lot! Whenever we "open R" in this course, we will actually be opening RStudio.</p>
<p>Because RStudio doesn't work without R, the first thing we need to do is download R. To do this you can go to <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> and download the most recent version of the software. R is available for both PC and Mac users. Once you download the package you can install by following the instructions on the installer. One part of the instructions that sometimes trips up students is that you need to decide on a location for a CRAN mirror. The general advice for this is to choose the CRAN mirror in closest physical proximity to you. This is to potentially improve the download speed and to balance resources across different servers. In practice, you really don't have to worry about this decision. Any CRAN mirror will allow you to download an identical version of R.</p>
</div>
<div id="rstudio-interface" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> RStudio Interface<a class="anchor" aria-label="anchor" href="#rstudio-interface"><i class="fas fa-link"></i></a>
</h2>
<p>When you open RStudio, you will be greeted by the RStudio Interface depicted below in Figure <a href="resume-experiments.html#fig:rstudio">6.1</a></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:rstudio"></span>
<img src="images/06_rstudio.png" alt="R Studio Interfacte" width="90%"><p class="caption">
Figure 6.1: R Studio Interfacte
</p>
</div>
<p>Let's discuss these 4 windows in turn. In the top left is the Editor Window. This is where you will write an R script that holds all of your code. You may not see this window initially if you have not yet opened an R script (which is the equivalent to a do-file in Stata). To open up a new R script you can go to <code>File &gt; New File &gt; R Script</code>.</p>
<p>Below the Editor Window is the the Console. This is where all your code will be executed and run. For example, if you write code to take the average of a variable in the Editor Window, when you execute that code, the result will be displayed in the Console.</p>
<p>In the top right we have the Environment, which is going to store objects, variables, and datasets. We will get more into what an object is further into the chapter.</p>
<p>Lastly, the bottom right window has a host of tabs that will be helpful. One that we will use frequently is the Plots tab. This is where figures that we create in R will be displayed. Another important tab is the Packages tab. Further in this chapter we will discuss the importance of packages in R. Lastly, we will also use the Help tab frequently. In this tab you can search for documentation on how to use certain functions in R. This is similar to help files that we often used in the Stata chapters.</p>
<p>So now that we understand the different components of the interface, we are going to get started with coding in R. The first thing to do is open a new R script. As discussed above, to do this, you can navigate to <code>File &gt; New File &gt; R Script</code>.</p>
<p>Now, in the R script, type:</p>
<div class="sourceCode" id="cb196"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">5</span><span class="op">+</span><span class="fl">3</span></span></code></pre></div>
<p>This line of code computes the sum of 5 and 3. In order to execute it, you have a few options. The first way to do this is to highlight the code, then press the Run button at the top right of the Editor window.</p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:run"></span>
<img src="images/06_run.png" alt="Run Button" width="90%"><p class="caption">
Figure 6.2: Run Button
</p>
</div>
<p>By clicking Run, the code is sent to the Console to be executed:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="resume-experiments.html#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">+</span><span class="dv">3</span></span>
<span id="cb197-2"><a href="resume-experiments.html#cb197-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">8</span></span></code></pre></div>
<p>The other way to execute code is through using shortcuts. On a Mac, if you click on a line of code, and then press <code>Command + Enter</code>, then that line of code will be sent to the console. On a PC, this is <code>Ctrl + Enter</code>. If you want to run multiple lines, you can simply highlight the lines you want to run, and then press either <code>Command + Enter</code> or <code>Ctrl + Enter</code> and then R will execute all of those lines of code in sequential order.</p>
<p>Just like in Stata, you can do multiplication by using <code>*</code>, division by using <code>/</code> and exponents by using <code>^</code>. In R, the order of operations is controlled by parentheses:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="resume-experiments.html#cb198-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">5</span><span class="sc">+</span><span class="dv">3</span>)<span class="sc">/</span><span class="dv">3</span></span>
<span id="cb198-2"><a href="resume-experiments.html#cb198-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">2.666667</span></span>
<span id="cb198-3"><a href="resume-experiments.html#cb198-3" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">+</span> <span class="dv">3</span><span class="sc">/</span><span class="dv">2</span></span>
<span id="cb198-4"><a href="resume-experiments.html#cb198-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">6.5</span></span></code></pre></div>
<p>We can also utilize more complicated mathematical functions, like the log function, square root, or absolute value:</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="resume-experiments.html#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="dv">5</span>)</span>
<span id="cb199-2"><a href="resume-experiments.html#cb199-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.609438</span></span>
<span id="cb199-3"><a href="resume-experiments.html#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">2</span>)</span>
<span id="cb199-4"><a href="resume-experiments.html#cb199-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">1.414214</span></span>
<span id="cb199-5"><a href="resume-experiments.html#cb199-5" aria-hidden="true" tabindex="-1"></a><span class="fu">abs</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb199-6"><a href="resume-experiments.html#cb199-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span></span></code></pre></div>
<p>If we are ever unsure what a function does, we can utilize the help files. For example, for the log function, we may not be sure what the base is. To bring up the help file for the log function we can type:</p>
<div class="sourceCode" id="cb200"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">log</span></span></code></pre></div>
<p>Reading the help file will inform us that by default, the base of the log function is equal to <span class="math inline">\(e\)</span>, which implies the default is to take the natural logarithm. Additionally, the help file tells you how to compute logarithms for different bases, such as base 10.</p>
<p>As in Stata, it will be helpful to document your code. When doing empirical projects, you want to be able to go back to the code at a later date and quickly understand what the code is doing. Comments are essential for this. Again, comments are lines within a script that are not meant to be run. They are there to describe what the code is doing.</p>
<p>Any line with a <code>#</code> at the beginning is commented out. If you don't comment out descriptions of the code, then R will try to execute them, leading to errors in the output. So, for example, imagine I want to calculate the hypotenuse of a particular triangle, with sides of length 5 and 4. The code below does this, while also documenting what the code is doing.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="resume-experiments.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate the hypotenuse of a triangle</span></span>
<span id="cb201-2"><a href="resume-experiments.html#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="co">#One side = 5</span></span>
<span id="cb201-3"><a href="resume-experiments.html#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co">#The other side = 4</span></span>
<span id="cb201-4"><a href="resume-experiments.html#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co">#The hypotenuse is:</span></span>
<span id="cb201-5"><a href="resume-experiments.html#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">5</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span><span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb201-6"><a href="resume-experiments.html#cb201-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">6.403124</span></span></code></pre></div>
<p>Now imagine I forgot to comment out the first line of description. Let's see what would happen</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="resume-experiments.html#cb202-1" aria-hidden="true" tabindex="-1"></a>Calculate the hypotenuse of a triangle</span>
<span id="cb202-2"><a href="resume-experiments.html#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="co">#One side = 5</span></span>
<span id="cb202-3"><a href="resume-experiments.html#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co">#The other side = 4</span></span>
<span id="cb202-4"><a href="resume-experiments.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="co">#The hypotenuse is:</span></span>
<span id="cb202-5"><a href="resume-experiments.html#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="dv">5</span><span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="dv">4</span><span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb202-6"><a href="resume-experiments.html#cb202-6" aria-hidden="true" tabindex="-1"></a>Error<span class="sc">:</span> <span class="er">&lt;</span>text<span class="sc">&gt;</span><span class="er">:</span><span class="dv">1</span><span class="sc">:</span><span class="dv">11</span><span class="sc">:</span> unexpected symbol</span>
<span id="cb202-7"><a href="resume-experiments.html#cb202-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span> Calculate the</span>
<span id="cb202-8"><a href="resume-experiments.html#cb202-8" aria-hidden="true" tabindex="-1"></a>              <span class="sc">^</span></span></code></pre></div>
<p>It reports an error because <code>Calculate</code> is not executable code in R. By placing a <code>#</code> at the beginning of the line, however, R will ignore this line and not try to execute it.</p>
</div>
<div id="objects" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Objects<a class="anchor" aria-label="anchor" href="#objects"><i class="fas fa-link"></i></a>
</h2>
<p><em>Objects</em> in R are any pieces of information:</p>
<ul>
<li>A number, called ``numeric'' in R (e.g. <span class="math inline">\(5.23\)</span>)</li>
<li>A text string, called ``character'' in R (e.g. "UCSD is awesome")</li>
<li>A dataset (e.g. we will look at a resume dataset soon)</li>
<li>Many more!</li>
</ul>
<p>R can store objects with a name of our choice. In order to create an object, you can use the assignment operator <code>&lt;-</code>. For example, if I want to create an object named <code>graduationdate</code>, which is equal to 2010, I would type</p>
<div class="sourceCode" id="cb203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graduationdate</span> <span class="op">&lt;-</span> <span class="fl">2010</span></span></code></pre></div>
<p>This will add to the Environment (top right window) a new object called graduation date, which is equal to 2010. Instead of the assignment operator <code>&lt;-</code>, we can also use <code>=</code>. While it is generally suggested to use the assignment operator in R when creating objects, the equals sign will also work, as below/</p>
<div class="sourceCode" id="cb204"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graduationdate</span> <span class="op">=</span> <span class="fl">2010</span></span></code></pre></div>
<p>Now that we have this object stored in memory, every time we type the word <code>graduationdate</code>, R interprets the value of 2010. This means we can use our object in calculations. For example, to calculate the number of years between 2022 and the graduation date, we can type:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="resume-experiments.html#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2022</span><span class="sc">-</span>graduationdate</span>
<span id="cb205-2"><a href="resume-experiments.html#cb205-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">12</span></span></code></pre></div>
<p>If we assign a new value to the same object name, then we will overwrite this object (so be careful when doing so).</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="resume-experiments.html#cb206-1" aria-hidden="true" tabindex="-1"></a>graduationdate <span class="ot">&lt;-</span> <span class="dv">2014</span></span>
<span id="cb206-2"><a href="resume-experiments.html#cb206-2" aria-hidden="true" tabindex="-1"></a>graduationdate</span>
<span id="cb206-3"><a href="resume-experiments.html#cb206-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2014</span></span></code></pre></div>
<p><code>R</code> can also represent other types of values as objects, such as strings of characters:</p>
<div class="sourceCode" id="cb207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">school</span> <span class="op">&lt;-</span> <span class="st">"UCSD"</span></span></code></pre></div>
<p>We can use the class function to retrieve the type of object</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="resume-experiments.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(graduationdate)</span>
<span id="cb208-2"><a href="resume-experiments.html#cb208-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"numeric"</span></span>
<span id="cb208-3"><a href="resume-experiments.html#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(school)</span>
<span id="cb208-4"><a href="resume-experiments.html#cb208-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"character"</span></span></code></pre></div>
<p>So far, every object we have created has a single value associated with it. Next, we will discuss vectors. A <em>vector</em> represents a collection of information of the same type stored in a specific order. For example, instead of the graduation date of a single individual, maybe we have information on the graduation date of four individuals. This collection of information constitutes a vector. We can create a vector in R by using the function <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>, which stands for "concatenate". For example, let's create a vector fo graduation dates:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="resume-experiments.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a vector of graduation dates</span></span>
<span id="cb209-2"><a href="resume-experiments.html#cb209-2" aria-hidden="true" tabindex="-1"></a>graduationdate <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2010</span>, <span class="dv">2009</span>, <span class="dv">2015</span>, <span class="dv">2001</span>)</span>
<span id="cb209-3"><a href="resume-experiments.html#cb209-3" aria-hidden="true" tabindex="-1"></a>graduationdate</span>
<span id="cb209-4"><a href="resume-experiments.html#cb209-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2010</span> <span class="dv">2009</span> <span class="dv">2015</span> <span class="dv">2001</span></span></code></pre></div>
<p>We can perform calculations on a vector as well. For example, for each student, let's compute the number of years between graduation and the year 2022.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="resume-experiments.html#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate years since graduation</span></span>
<span id="cb210-2"><a href="resume-experiments.html#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2022</span> <span class="sc">-</span> graduationdate</span>
<span id="cb210-3"><a href="resume-experiments.html#cb210-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">12</span> <span class="dv">13</span>  <span class="dv">7</span> <span class="dv">21</span></span></code></pre></div>
<p><code>graduationdate</code> is a numeric vector, because each element is a number. We can also create character vectors, where each element is a word. For example, imagine next we want to create a vector that contains information on the school of each of our four individual students. We could type:</p>
<div class="sourceCode" id="cb211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Create a vector of schools</span></span>
<span><span class="va">school</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"UCSD"</span>, <span class="st">"UCB"</span>, <span class="st">"UCLA"</span>, <span class="st">"UCR"</span><span class="op">)</span></span></code></pre></div>
<p>As in Stata, whenever you reference character values (also known as string values), you put these values in quotation marks. This lets R know that this information is composed of characters, not numbers.</p>
<p>One important note is that a vector cannot hold information of different types. In other words, you can't have a vector that holds both numeric and character values. For example, imagine we try to combine our two vectors using the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="resume-experiments.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(graduationdate, school)</span>
<span id="cb212-2"><a href="resume-experiments.html#cb212-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"2010"</span> <span class="st">"2009"</span> <span class="st">"2015"</span> <span class="st">"2001"</span> <span class="st">"UCSD"</span> <span class="st">"UCB"</span>  <span class="st">"UCLA"</span> <span class="st">"UCR"</span> </span></code></pre></div>
<p>Now it may look like we have succeeded, but look carefully at the first few entries. Each entry is surrounded by quotation marks. R has changed the numeric entries to character entries.</p>
<p>Lastly, one helpful note is that we can use arithmetic operations between vectors. For example, imagine we have a vector of individual incomes and a vector of planned raises for each individual. To get to the total income after the raise, we can add these two vectors together.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="resume-experiments.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a vector of income</span></span>
<span id="cb213-2"><a href="resume-experiments.html#cb213-2" aria-hidden="true" tabindex="-1"></a>income <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">70</span>, <span class="dv">20</span>, <span class="dv">100</span>)</span>
<span id="cb213-3"><a href="resume-experiments.html#cb213-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-4"><a href="resume-experiments.html#cb213-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Create a vector of raises</span></span>
<span id="cb213-5"><a href="resume-experiments.html#cb213-5" aria-hidden="true" tabindex="-1"></a>raise <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">20</span>)</span>
<span id="cb213-6"><a href="resume-experiments.html#cb213-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-7"><a href="resume-experiments.html#cb213-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculate current income for each person</span></span>
<span id="cb213-8"><a href="resume-experiments.html#cb213-8" aria-hidden="true" tabindex="-1"></a>income <span class="sc">+</span> raise</span>
<span id="cb213-9"><a href="resume-experiments.html#cb213-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">70</span>  <span class="dv">80</span>  <span class="dv">23</span> <span class="dv">120</span></span></code></pre></div>
<p>In terms of data analysis, we can really think of vectors as a variable. Our first variable was graduation date, our second variable was the school. Often, in data analysis, we want to compute some summary statistics of our variables. In R, there are a host of functions that are helpful in summarizing numeric vectors:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/length.html">length()</a></code>: length of a vector (number of elements)</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>: minimum value</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>: maximum value</li>
<li>
<code><a href="https://rdrr.io/r/base/range.html">range()</a></code>: range of data</li>
<li>
<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>: mean value</li>
<li>
<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>: total sum of the elements</li>
</ul>
<p>Let's try some of these out so that we can get a good sense of what these functions are doing:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="resume-experiments.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Maximum income</span></span>
<span id="cb214-2"><a href="resume-experiments.html#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(income)</span>
<span id="cb214-3"><a href="resume-experiments.html#cb214-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">100</span></span></code></pre></div>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="resume-experiments.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Minimum graduate date</span></span>
<span id="cb215-2"><a href="resume-experiments.html#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(graduationdate)</span>
<span id="cb215-3"><a href="resume-experiments.html#cb215-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2001</span></span></code></pre></div>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="resume-experiments.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Length of the vector income</span></span>
<span id="cb216-2"><a href="resume-experiments.html#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(income)</span>
<span id="cb216-3"><a href="resume-experiments.html#cb216-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">4</span></span></code></pre></div>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="resume-experiments.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Range of graduation dates</span></span>
<span id="cb217-2"><a href="resume-experiments.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(graduationdate)</span>
<span id="cb217-3"><a href="resume-experiments.html#cb217-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2001</span> <span class="dv">2015</span></span></code></pre></div>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="resume-experiments.html#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Mean years since graduation</span></span>
<span id="cb218-2"><a href="resume-experiments.html#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="dv">2022</span> <span class="sc">-</span> graduationdate)</span>
<span id="cb218-3"><a href="resume-experiments.html#cb218-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">13.25</span></span></code></pre></div>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="resume-experiments.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sum of income</span></span>
<span id="cb219-2"><a href="resume-experiments.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(income)</span>
<span id="cb219-3"><a href="resume-experiments.html#cb219-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">255</span></span></code></pre></div>
<p>Notice that many of these functions require a numeric input. For example, it does not make sense to take the average of <code>school</code>:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="resume-experiments.html#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(school)</span>
<span id="cb220-2"><a href="resume-experiments.html#cb220-2" aria-hidden="true" tabindex="-1"></a>Warning <span class="cf">in</span> <span class="fu">mean.default</span>(school)<span class="sc">:</span> argument is not numeric or</span>
<span id="cb220-3"><a href="resume-experiments.html#cb220-3" aria-hidden="true" tabindex="-1"></a>logical<span class="sc">:</span> returning <span class="cn">NA</span></span>
<span id="cb220-4"><a href="resume-experiments.html#cb220-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">NA</span></span></code></pre></div>
<p>However, it does make sense to ask, how many elemnents are there in the vector <code>school</code>?</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="resume-experiments.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(school)</span>
<span id="cb221-2"><a href="resume-experiments.html#cb221-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">4</span></span></code></pre></div>
</div>
<div id="working-directory-1" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Working Directory<a class="anchor" aria-label="anchor" href="#working-directory-1"><i class="fas fa-link"></i></a>
</h2>
<p>In this section, we are going to discuss how to load data. First, we will introduce how to set your working directory in R. Then, we will load in the datafile named <code>resume.csv</code>. To remind you, this is a dataset of fictitious resumes that were sent out by Bertrand and Mullainathan (2004) in order to identify labor-market discrimination. We are going to study callback rates for applicants with white-sounding names and applicants with Black-sounding names. If we find any differences in callback rates, it must be driven by race, as all other factors between the resumes are designed to be similar by the researchers.</p>
<p>To remind you from the Stata chapters, the <strong>working directory</strong> is the "address" on your computer where R looks for data. It is also the address where it outputs results, such as datasets, figures or tables. In order to work with data in R, you need a good understanding of the working directory. To retrieve the current working directory in R, you can type:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="resume-experiments.html#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span>
<span id="cb222-2"><a href="resume-experiments.html#cb222-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"/Users/davidarnold/Dropbox/Teaching/EP5Bookdown"</span></span></code></pre></div>
<p>To set your working directory, we use the <code><a href="https://rdrr.io/r/base/getwd.html">setwd()</a></code> function. You should set the working directory to wherever the data is located. For this chapter, you want to set your directory wherever you have placed the data file <code>resume.csv</code>. For example, on my computer, I would type:</p>
<div class="sourceCode" id="cb223"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="st">"/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/data"</span><span class="op">)</span> </span></code></pre></div>
<p>Because this is the folder that I have placed the data. If you are uncertain how to get this address in R, you can also find the Session tab at the top of the screen. If you click on Session, one of the options will be Set Working Directory. You can then navigate to Choose Directory. This will allow you to navigate through your folders as you usually would. Click the folder in which you have stored the data and press Open. This will then change your working directory to that folder. Even better, the code used to change the directory will be printed in the console. You can just copy and paste that snippet of code into your R script so that next time you open up the script you can just run the line of code instead of manually setting up the directory.</p>
</div>
<div id="dataframes" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Dataframes<a class="anchor" aria-label="anchor" href="#dataframes"><i class="fas fa-link"></i></a>
</h2>
<p>Now that we have set the working directory, we can actually load in our data to start exploring it. To do this, we will use the <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> command. This is the command used to load comma separated values files.</p>
<div class="sourceCode" id="cb224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resume</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"resume.csv"</span><span class="op">)</span></span></code></pre></div>
<p>If we look to the environment now, we will have a dataset of 4870 observations (obs.) and 5 variables. If you click on the blue arrow next to the data frame, the variables (and the first few values), will be revealed, as in Figure <a href="resume-experiments.html#fig:bluearrow">6.3</a></p>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:bluearrow"></span>
<img src="images/06_bluearrow.png" alt="Loading a Data Frame" width="90%"><p class="caption">
Figure 6.3: Loading a Data Frame
</p>
</div>
<p>If you click on the name of the data frame, RStudio will open up a spreadsheet of all the data. This is similar to how we would use the <code>browse</code> command when using Stata. This allows you to look through the raw data and understand what the various variables are and what values they may take.</p>
<p>There are also a few ways to summarize information about the data frame. For example <code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code>, retrieves the number of columns. <code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> retrieves the number of rows In this example, there are 5 variables, so there will be 5 columns. There are 4,870 observations, so there are 4,870 rows. One thing we can do to quickly get a sense of the data is to type <code>summary(resume)</code>. This provides some simple summary statistics for each variable in the data frame.</p>
<div class="sourceCode" id="cb225"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">resume</span><span class="op">)</span></span></code></pre></div>
<pre><code>       X         firstname             sex           
 Min.   :   1   Length:4870        Length:4870       
 1st Qu.:1218   Class :character   Class :character  
 Median :2436   Mode  :character   Mode  :character  
 Mean   :2436                                        
 3rd Qu.:3653                                        
 Max.   :4870                                        
     race                call        
 Length:4870        Min.   :0.00000  
 Class :character   1st Qu.:0.00000  
 Mode  :character   Median :0.00000  
                    Mean   :0.08049  
                    3rd Qu.:0.00000  
                    Max.   :1.00000  </code></pre>
<p>For numeric variables, this command provides the min, max, 25th percentile (called 1st Quartile), median, mean, 75th percentile (called 3rd Quantile) and max. For character variables, R just reports the length (i.e. the number of observations). In this dataset, the variable <code>X</code> is just a variable that records the observation number, which goes frmo 1 to 4870. <code>firstname</code> is the name on the application. <code>sex</code> is either female or male. <code>race</code> is either white or Black. <code>call</code> is our main outcome of interest. It is equal to 1 if the fictitious application received a callback for an interview. It is equal to 0 if the fictitious application did not receive a callback.</p>
<p>Although we have already shown how to browse the raw data, it is sometimes inconvenient to look at the entire data frame, particularly when you have a very large dataset. However, it is often helpful to get a small snippet of the data. To do this, we can use the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> function. This shows you the first six observations in the data frame:</p>
<div class="sourceCode" id="cb227"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">resume</span><span class="op">)</span></span></code></pre></div>
<pre><code>  X firstname    sex  race call
1 1   Allison female white    0
2 2   Kristen female white    0
3 3   Lakisha female black    0
4 4   Latonya female black    0
5 5    Carrie female white    0
6 6       Jay   male white    0</code></pre>
<p>Similarly, we can use the <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> function to show the last six observations in the data frame.</p>
<p>Next, let's talk about a big distinction between R and Stata. In Stata, we always had one data set. This makes it easy to reference variables: we just type the variable name. For example, if we had wanted to take the mean of the variable <code>call</code> in Stata, we would have typed <code>sum call</code>.</p>
<p>In R, however, you can load multiple data frames at a time. This is actually a really nice feature of R, especially when you are trying to merge data frames together. What it means, however, is that whenever you reference a variable, you need to reference both the variable name, as well as the data frame that it comes from. For example, to reference the variable <code>call</code> within the data frame <code>resume</code>, we type <code>resume$call</code>.</p>
<p>For example, if we wanted to look at the first six observations, but only for <code>call</code>, we would type:</p>
<div class="sourceCode" id="cb229"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">resume</span><span class="op">$</span><span class="va">call</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] 0 0 0 0 0 0</code></pre>
<p>It is a very common mistake for beginners to forget to specify both the data frame and the variable. This can lead to some confusing errors, so always make sure that you are specifying both the data frame and the variable in R.</p>
<p>Now that we have our data loaded and we understand how to reference variables, let's begin to explore the data. First, let's get a sense of the callback rates for these fictitious applicants. Remember, our variable <code>call</code> is equal to 1 if the resume received a callback for an interview. Therefore, if we take the average of this variable, then this value will be equal to the fraction of individuals that received a callback. If you don't follow this logic, make sure to flip back to Chapter 1.5 to review why this is true.</p>
<p>We already know how to take the average of a vector, we use the <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function. But a column in a data frame is just a vector. So we can use this function to find the callback rate:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="resume-experiments.html#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume<span class="sc">$</span>call)</span>
<span id="cb231-2"><a href="resume-experiments.html#cb231-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.08049281</span></span></code></pre></div>
<p>So around 8 percent of all applicants received a callback for an interview. Low callback rates are pretty common in these settings. Next, let's look at our other main variable of interest. To get the distribution of race we can use the <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> function, which prints out a table of frequencies:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="resume-experiments.html#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(resume<span class="sc">$</span>race)</span>
<span id="cb232-2"><a href="resume-experiments.html#cb232-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-3"><a href="resume-experiments.html#cb232-3" aria-hidden="true" tabindex="-1"></a>black white </span>
<span id="cb232-4"><a href="resume-experiments.html#cb232-4" aria-hidden="true" tabindex="-1"></a> <span class="dv">2435</span>  <span class="dv">2435</span> </span></code></pre></div>
<p>So there are equal numbers of white and Black applicants. This was by design. The researchers were particularly interested in understanding racial disparities in callback rates. Therefore, they designed the experiment to have equal rates of white and Black applicants.</p>
<p>Lastly, let's talk about how to save a data frame. In most empirical projects, we won't have such a clean data frame to start with. We may need to drop certain observations, clean certain variables, and overall, make many changes to our data. It is never a good idea to overwrite your raw data, so after you are done cleaning your data, you should save a new data file.</p>
<p>To save a csv file in R, you can use the <code>write.csv</code> function:</p>
<div class="sourceCode" id="cb233"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">resume</span>, file<span class="op">=</span><span class="st">"resume1.csv"</span><span class="op">)</span></span></code></pre></div>
<p>This will save the data frame <code>resume</code> which is currently in memory as a csv file named <code>resume1.csv</code>. This file will be saved in your working directory.</p>
<p>There is also another format for data that is common in R: "RData". You can save your file as and RData file by using the <code><a href="https://rdrr.io/r/base/save.html">save()</a></code> function.</p>
<div class="sourceCode" id="cb234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">resume</span>, file<span class="op">=</span><span class="st">"resume1.RData"</span><span class="op">)</span></span></code></pre></div>
<p>There is often not a strong argument between saving as a csv file verse an RData file. In general, however, csv files are often more portable across different statistical programs. Most of the data we will be using in the R section of the course will therefore be stored as csv files.</p>
</div>
<div id="logic" class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> Logic<a class="anchor" aria-label="anchor" href="#logic"><i class="fas fa-link"></i></a>
</h2>
<p>Just like in Stata, logical statements will be a key concept in this section of the course. To remind you, a logical statement is any statement that is either true or false. In R, there is a special type of object, called <strong>logical objects</strong>, which are objects that take on either the value <code>TRUE</code> or <code>FALSE</code>.</p>
<p>Sometimes we may want to subset our data to observations in which a certain statement is true. For example, maybe we have a dataset that has individuals from many states, but we only want to analyze data for California. In this case, we may want to subset to observations such that the logical statement "Individual resides in California" is true. We are often going to be using logical statements in R to manipulate our data.</p>
<p>So how do we create these objects that are either true or false? We use logical operators. We have seen many logical operators in the Stata portion of the class. For example, the double equals sign <code>==</code> is a logical operator that tests whether two things are equal. Here is a list of all the logical operators we will be using throughout the R portion of the course:</p>
<ul>
<li><p><code>!</code> -- not</p></li>
<li><p><code>&amp;</code> -- and</p></li>
<li><p><code>|</code> -- or</p></li>
<li><p><code>==</code> -- equals</p></li>
<li><p><code>!=</code> -- not equals</p></li>
<li><p><code>&gt;</code> -- greater than</p></li>
<li><p><code>&lt;</code> -- less than</p></li>
<li><p><code>&gt;=</code> -- greater than or equal to</p></li>
<li><p><code>&lt;=</code> -- less than or equal to</p></li>
</ul>
<p>Now that we've written out the different logical operators, let's see how to use these in R. To begin, let's start with a simple logical statement: "5 is equal to 6". The way we type this in R is we type <code>5==6</code>. This statement is of course false, so if we type this into R it should yield <code>FALSE</code>.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="resume-experiments.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">==</span><span class="dv">6</span></span>
<span id="cb235-2"><a href="resume-experiments.html#cb235-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
<p>If instead, our logical statement is "5 is equal to 5", then this statement should yield <code>TRUE</code>.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="resume-experiments.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">==</span><span class="dv">5</span></span>
<span id="cb236-2"><a href="resume-experiments.html#cb236-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>Now let's write out "5 is not equal to 6", by using the <code>!</code> operator.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="resume-experiments.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">!=</span><span class="dv">6</span></span>
<span id="cb237-2"><a href="resume-experiments.html#cb237-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>But "6 not equal to 6" is of course <code>FALSE</code>:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="resume-experiments.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span><span class="sc">!=</span><span class="dv">6</span></span>
<span id="cb238-2"><a href="resume-experiments.html#cb238-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
<p>Now let's try to understand the <code>&amp;</code> operator. We use the <code>&amp;</code> operator when we want to test if two statements are <strong>both</strong> true. For example, let's imagine we have an individual who is 18 and lives in California. Then the statement "This individual is 18 and lives in California" is true. The way we might type this in R is <code>age==18 &amp; state=="CA"</code>. Now let's do an example in R. Imagine we want to retrieve the answer to "5 is equal to 5 and 5 is equal to 6". In R we would type <code>5==5 &amp; 5==6</code>. This statement is false because 5 is not equal to 6. If one of the statements is fales (<code>5==6</code>) then the whole statement is false (<code>5==5 &amp; 5==6</code>).</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="resume-experiments.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">==</span><span class="dv">5</span> <span class="sc">&amp;</span> <span class="dv">5</span><span class="sc">==</span><span class="dv">6</span></span>
<span id="cb239-2"><a href="resume-experiments.html#cb239-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span></span></code></pre></div>
<p>In contrast, the statement "5 is equal to 5 and 5 is greater than 4" is true because both of the statements indiviudallt are true.</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="resume-experiments.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">==</span><span class="dv">5</span> <span class="sc">&amp;</span> <span class="dv">5</span><span class="sc">&gt;</span><span class="dv">4</span></span>
<span id="cb240-2"><a href="resume-experiments.html#cb240-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>Now let's discuss or statements. For an or statement, we are instead testing whether either statement is true. For example, if our statement is "5 is equal to 5 or 5 is equal to 6", then this is true if either <code>5==5 | 5==6</code>.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="resume-experiments.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span><span class="sc">==</span><span class="dv">5</span> <span class="sc">|</span> <span class="dv">5</span><span class="sc">==</span><span class="dv">6</span></span>
<span id="cb241-2"><a href="resume-experiments.html#cb241-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span></code></pre></div>
<p>So far we have only applied logic to numbers in R. However, we can also apply this to vectors in R. This will be particularly important when we turn to data. We will often want to apply logical statements to variables in our data.</p>
<p>As a simple example, let's create a vector of graduation dates that has four entries:</p>
<div class="sourceCode" id="cb242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graduationdates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">2001</span>,<span class="fl">2019</span>,<span class="fl">2003</span><span class="op">)</span></span></code></pre></div>
<p>We can apply logical statements to the entire vector as well. For example, imagine we want to know which graduation dates are after 2010. We can type:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="resume-experiments.html#cb243-1" aria-hidden="true" tabindex="-1"></a>graduationdates<span class="sc">&gt;</span><span class="dv">2010</span></span>
<span id="cb243-2"><a href="resume-experiments.html#cb243-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">FALSE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>This outputs another vector of four entries. Each entry tells us whether the corresponding entry in our <code>graduationdates</code> vector is greater than 2010. For entries 1, 2, and 4, this statement is <code>FALSE</code>. For entry 3, this statement is <code>TRUE</code>.</p>
<p>Next, let's learn how to compare two vectors. For example, imagine we have the vector of birth years that are supposed to be for the same individuals as in the graduation data:</p>
<div class="sourceCode" id="cb244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">birthyears</span><span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2016</span>, <span class="fl">1980</span>, <span class="fl">1996</span>, <span class="fl">1990</span><span class="op">)</span></span></code></pre></div>
<p>By looking at this vector, it is clear something went wrong for the first individual. The individual is reported as being born in 2016, but graduated in 2010. There must have been some sort of data entry error for this individual. While we can quickly identify this mistake in our small data, imagine we have thousands of individuals. It won't be possible to identify all of the errors by manually going through the data.</p>
<p>Instead, we can simply test whether there are <code>birthyears</code> in the data that are greater than <code>graduationdates</code></p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="resume-experiments.html#cb245-1" aria-hidden="true" tabindex="-1"></a>birthyears <span class="sc">&gt;</span> graduationdates</span>
<span id="cb245-2"><a href="resume-experiments.html#cb245-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>For this logical statement, the first element of <code>birthyears</code> is compared to the first element of <code>graduationdates</code>. Since 2016 is greater than 2010, the first element of the resulting logical vector is <code>TRUE</code>. The second element of <code>birthyears</code> is compared to the second element of <code>graduationdates</code>. Since 1980 is less than 2001, this statement is <code>FALSE</code>.</p>
<p>So far, we have just observed the output of these logical statements (i.e. the output is displayed in the console). But imagine we want to save the output because we are using it in future analyses. For example, imagine we want to drop observations in which the birth year is greater than the graduation date. Well, we can simply store the output in a new vector by assigning it a name:</p>
<div class="sourceCode" id="cb246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">problem</span> <span class="op">&lt;-</span> <span class="va">birthyears</span> <span class="op">&gt;</span> <span class="va">graduationdates</span></span></code></pre></div>
<p>Now we have a vector <code>problem</code> that has been added to our environment. If we check the class of this vector we will see that it is a logical vector.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="resume-experiments.html#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(problem)</span>
<span id="cb247-2"><a href="resume-experiments.html#cb247-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"logical"</span></span></code></pre></div>
<p>Now, the way logic functions in R is that it can function as a numeric variable. Specifically, the value <code>TRUE</code> is equal to the number 1. The value <code>FALSE</code> is equal to the number 0. Therefore, we can treat logical statements in the same way we've treated binary indicator variables in the past. For example, imagine I would like to compute the fraction of individuals for which there is a problem in the data, which is defined as a birth year greater than a graduation year. All I have to do is take the average of the <code>problem</code> vector.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="resume-experiments.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(problem)</span>
<span id="cb248-2"><a href="resume-experiments.html#cb248-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.25</span></span></code></pre></div>
<p>Why does this get us the right result. Because the problem vector is equal to <code>TRUE FALSE FALSE FALSE</code>. R will interpret this vector as <code>1 0 0 0</code>. The mean value of this vector is therefore equal to 0.25. In other words, for 25 percent of individuals, there is a problem in the data. If you prefer to have the vector in numeric format instead of logical, you can also change it yourself by using the <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code> function:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="resume-experiments.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(problem)</span>
<span id="cb249-2"><a href="resume-experiments.html#cb249-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">0</span></span></code></pre></div>
<p>This just changes how the information is displayed to you in R, not the actual information itself.</p>
</div>
<div id="subsetting-vectors" class="section level2" number="6.8">
<h2>
<span class="header-section-number">6.8</span> Subsetting Vectors<a class="anchor" aria-label="anchor" href="#subsetting-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>Often we want to extract certain elements of a vector, which is know as <strong>subsetting</strong>. In R, to subset a vector we use <code>[]</code>. Inside the <code>[]</code> we can place a number to extract a certain element. For example, if we type <code>graduationdate[3]</code>, we would extract the third element of the vector <code>graduationdate</code>. This is referred to as <strong>indexing</strong>. In this example, 3 is the index number.</p>
<p>We can also use logic to extract certain elements. For example, in general, if we type <code>vec[logical statement]</code>, then only the elements for which the logical statement is true will be extracted. This will be especially useful when using data because it is common we want to extract elements that meet a certain condition, for example, individuals above the age of 18, or counties located in California, etc.</p>
<p>To understand how to subset vectors in R, let's run through a few examples. First, let's re-create our <code>graduationdates</code> vector.</p>
<div class="sourceCode" id="cb250"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">graduationdates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2010</span>,<span class="fl">2001</span>,<span class="fl">2019</span>,<span class="fl">2003</span><span class="op">)</span></span></code></pre></div>
<p>The third entry of <code>graduationdates</code> is 2019. If we want to extract this entry, we can just type</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="resume-experiments.html#cb251-1" aria-hidden="true" tabindex="-1"></a>graduationdates[<span class="dv">3</span>]</span>
<span id="cb251-2"><a href="resume-experiments.html#cb251-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2019</span></span></code></pre></div>
<p>Instead of extracting an element, you can also use what is referred to as negative indexing. If you put a negative in front of the index number, then you get all elements of the vector, except that element. For example, let's see what happens when we type <code>graduationdates[-3]</code></p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="resume-experiments.html#cb252-1" aria-hidden="true" tabindex="-1"></a>graduationdates[<span class="sc">-</span><span class="dv">3</span>]</span>
<span id="cb252-2"><a href="resume-experiments.html#cb252-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2010</span> <span class="dv">2001</span> <span class="dv">2003</span></span></code></pre></div>
<p>The output is another vector, but now only composed of three elements. The new vector has dropped the third element of <code>graduationdates</code>.</p>
<p>You can also use indexing to subset multiple elements of a vector. For example, imagine we would like to extract the first and third element of the <code>graduationdates</code> vector. To do this, we create a vector of indices.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="resume-experiments.html#cb253-1" aria-hidden="true" tabindex="-1"></a>graduationdates[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span>
<span id="cb253-2"><a href="resume-experiments.html#cb253-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2010</span> <span class="dv">2019</span></span></code></pre></div>
<p>If you recall, <code>c(1,3)</code> is a vector. The <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function concatenates 1 and 3 into a vector. The way R reads the statement above is "extract from the vector <code>graduationdates</code>, the 1st and 3rd element.</p>
<p>Now that we understand how to subset vectors using numbers and vectors, let's learn how to index using logic. Instead of entering a vector of numbers as the index, we can directly enter a vector of <code>TRUE</code> and <code>FALSE</code>. Only the elements for which the entry is <code>TRUE</code> will be extracted. To see how this work, let's try to understand the example below:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="resume-experiments.html#cb254-1" aria-hidden="true" tabindex="-1"></a>graduationdates[<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span>
<span id="cb254-2"><a href="resume-experiments.html#cb254-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2010</span> <span class="dv">2019</span></span></code></pre></div>
<p>The vector <code>c(TRUE, FALSE, TRUE, FALSE)</code> is <code>TRUE</code> for the 1st and 3rd element. Therefore, only the first and third elements have been extracted. A more common way you might see this used is through another vector or variable. For example, imagine we also have a vector that contains the school that the student attended.</p>
<div class="sourceCode" id="cb255"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">school</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"UCSD"</span>, <span class="st">"UCB"</span>, <span class="st">"UCLA"</span>, <span class="st">"UCR"</span><span class="op">)</span></span></code></pre></div>
<p>Imagine we want to retrieve the graduation date for the student that attended UCSD. If we type <code>school=="UCSD"</code>, we will get a vector of 4 elements:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="resume-experiments.html#cb256-1" aria-hidden="true" tabindex="-1"></a>school<span class="sc">==</span><span class="st">"UCSD"</span></span>
<span id="cb256-2"><a href="resume-experiments.html#cb256-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>Only the first element is <code>TRUE</code>. Therefore, if we use this vector to subset the <code>graduationdate</code> vector, we will retrieve the graduation date of the student who attended UCSD.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="resume-experiments.html#cb257-1" aria-hidden="true" tabindex="-1"></a>graduationdates[school<span class="sc">==</span><span class="st">"UCSD"</span>]</span>
<span id="cb257-2"><a href="resume-experiments.html#cb257-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2010</span></span></code></pre></div>
<p>Next, let's turn from our simple examples to our empirical application for this section: correspondence studies. First, let's re-load the data on fictitious applications from Bertrand and Mullainathan (2004).</p>
<div class="sourceCode" id="cb258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resume</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"resume.csv"</span><span class="op">)</span></span></code></pre></div>
<p>Remember, we can really think of each variable in a dataframe as a vector. Therefore, we don't really need to learn anything new. We just need to apply what we have learned so far to this new data structure.</p>
<p>First, let's talk about how to use logical subsetting on a variable. What happens if we type <code>resume$race=="black"</code>. Well, <code>resume$race</code> is a vector with 4,870 elements. It takes on values "white" or "black". Therefore, <code>resume$race=="black"</code> is also a vector with 4,870 elements. The first element is <code>TRUE</code> if the first individual in the dataset had a Black-sounding name. The first element is <code>FALSE</code> if the first element had a white-sounding name. You can convince yourself of this by typing:</p>
<div class="sourceCode" id="cb259"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vec</span> <span class="op">&lt;-</span> <span class="va">resume</span><span class="op">$</span><span class="va">race</span><span class="op">==</span><span class="st">"black"</span></span></code></pre></div>
<p>And then studying the resulting vector <code>vec</code>. What happens if we then add a function around this vector. For example, if we type <code>sum(resume$race=="black")</code>, then R should add up all the values of the vector <code>resume$race=="black"</code>. Recall, R interprets a value of <code>TRUE</code> as equal to 1, and a value of <code>FALSE</code> as equal to 0. So if we type <code>sum(resume$race=="black")</code>, we will just retrieve the total number of applications with Black-sounding names.</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="resume-experiments.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(resume<span class="sc">$</span>race<span class="sc">==</span><span class="st">"black"</span>)</span>
<span id="cb260-2"><a href="resume-experiments.html#cb260-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2435</span></span></code></pre></div>
<p>We can subset one variable using a logical statement built from another variable. For example, imagine we want to compute the callback rate for Black applicants. Therefore, we want to compute the average of <code>call</code> only for individuals such that <code>race=="black"</code>. In R, we can write out this statement as following:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="resume-experiments.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume<span class="sc">$</span>call[resume<span class="sc">$</span>race<span class="sc">==</span><span class="st">"black"</span>])</span>
<span id="cb261-2"><a href="resume-experiments.html#cb261-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.06447639</span></span></code></pre></div>
<p>It is easiest to interpret this line of code by starting at the indexing step. <code>[resume$race=="black"]</code> restricts to observations for which the applicant is Black. <code>resume$call[resume$race=="black"]</code> is the vector <code>call</code>, but only restricted to the observations for which the applicant is Black. Finally, by placing the entire block inside the <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code> function, we are computing the average of <code>resume$call</code> for applicants such that <code>resume$race=="black"</code>. If we want to compare to white applicants, we can simply type:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="resume-experiments.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume<span class="sc">$</span>call[resume<span class="sc">$</span>race<span class="sc">==</span><span class="st">"white"</span>])</span>
<span id="cb262-2"><a href="resume-experiments.html#cb262-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.09650924</span></span></code></pre></div>
</div>
<div id="subsetting-data-frames" class="section level2" number="6.9">
<h2>
<span class="header-section-number">6.9</span> Subsetting Data Frames<a class="anchor" aria-label="anchor" href="#subsetting-data-frames"><i class="fas fa-link"></i></a>
</h2>
<p>Next, we will discuss how to subset data frames. To illustrate this concept, we are first going to generate a small data frame in R:</p>
<div class="sourceCode" id="cb263"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>school<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"UCSD"</span>, <span class="st">"UCB"</span>, <span class="st">"UCSD"</span><span class="op">)</span>,</span>
<span>                       graduationdate<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2010</span>, <span class="fl">2019</span>, <span class="fl">2015</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>To understand what the code above produced, let's look at the dataframe <code>student</code>:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="resume-experiments.html#cb264-1" aria-hidden="true" tabindex="-1"></a>students</span>
<span id="cb264-2"><a href="resume-experiments.html#cb264-2" aria-hidden="true" tabindex="-1"></a>  school graduationdate</span>
<span id="cb264-3"><a href="resume-experiments.html#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   UCSD           <span class="dv">2010</span></span>
<span id="cb264-4"><a href="resume-experiments.html#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    UCB           <span class="dv">2019</span></span>
<span id="cb264-5"><a href="resume-experiments.html#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   UCSD           <span class="dv">2015</span></span></code></pre></div>
<p>This data frame has two variables: <code>school</code> and <code>graduationdate</code>. The first column of the data frame corresponds to <code>school</code> and the second corresponds to <code>graduationdate</code>. The data frame has three total observations. To extract a specific value of the data frame, we can again use indexing. When using indexing with a vector, we could specify a single number, and that would pluck out that element. Now, with a data frame, we need to specify two numbers. First, we will specify the row we would like to extract and then we will specify the column. For example, to extract the value in the 3rd row, 1st column, we would type:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="resume-experiments.html#cb265-1" aria-hidden="true" tabindex="-1"></a>students[<span class="dv">3</span>,<span class="dv">1</span>]</span>
<span id="cb265-2"><a href="resume-experiments.html#cb265-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"UCSD"</span></span></code></pre></div>
<p>It output "UCSD", because the the third student in the data frame went to UCSD and the 1st column in the data frame corresponds to the variable <code>school</code>.</p>
<p>Instead of extracting specific elements of a data frame, you can also extract entire columns and rows. For example, to extract the first row type:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="resume-experiments.html#cb266-1" aria-hidden="true" tabindex="-1"></a>students[<span class="dv">1</span>,]</span>
<span id="cb266-2"><a href="resume-experiments.html#cb266-2" aria-hidden="true" tabindex="-1"></a>  school graduationdate</span>
<span id="cb266-3"><a href="resume-experiments.html#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   UCSD           <span class="dv">2010</span></span></code></pre></div>
<p>The second entry in the <code>[,]</code> always corresponds to the column. Since it is blank, R extracted all columns for the first observation. Similarly, you can extract a single column by leaving the rows portion of the index blank. For example, to extract the second column, type:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="resume-experiments.html#cb267-1" aria-hidden="true" tabindex="-1"></a>students[,<span class="dv">2</span>]</span>
<span id="cb267-2"><a href="resume-experiments.html#cb267-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2010</span> <span class="dv">2019</span> <span class="dv">2015</span></span></code></pre></div>
<p>Now, since the row index is blank, R extracts values from all rows, but just the second column.
You can also use a vector to specify what observations or columns you would like to retrieve. For example, imagine we think there was an error with recording the graduation date for second observation in our data frame. To be careful, we would like to drop this individual from the data frame. In other words, we want to extract rows 1 and 3 of the data frame, and leave out row 2. To do this, we can subset by specifying a vector of indices. The vector will contain the indices of every row we want in the final data frame:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="resume-experiments.html#cb268-1" aria-hidden="true" tabindex="-1"></a>students[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),]</span>
<span id="cb268-2"><a href="resume-experiments.html#cb268-2" aria-hidden="true" tabindex="-1"></a>  school graduationdate</span>
<span id="cb268-3"><a href="resume-experiments.html#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   UCSD           <span class="dv">2010</span></span>
<span id="cb268-4"><a href="resume-experiments.html#cb268-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   UCSD           <span class="dv">2015</span></span></code></pre></div>
<p>We can do the same thing with negative indexing, as seen below:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="resume-experiments.html#cb269-1" aria-hidden="true" tabindex="-1"></a>students[<span class="sc">-</span><span class="dv">2</span>,]</span>
<span id="cb269-2"><a href="resume-experiments.html#cb269-2" aria-hidden="true" tabindex="-1"></a>  school graduationdate</span>
<span id="cb269-3"><a href="resume-experiments.html#cb269-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   UCSD           <span class="dv">2010</span></span>
<span id="cb269-4"><a href="resume-experiments.html#cb269-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   UCSD           <span class="dv">2015</span></span></code></pre></div>
<p>Next, let's discuss how to use logic to subset data frames. For example, imagine we want to extract all individuals that went to UCSD. In other words, we only want individuals such that <code>students$school=="UCSD"</code> is TRUE. Remember, if we type this into R we will get a vector of TRUE and FALSE statements:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="resume-experiments.html#cb270-1" aria-hidden="true" tabindex="-1"></a>students<span class="sc">$</span>school<span class="sc">==</span><span class="st">"UCSD"</span></span>
<span id="cb270-2"><a href="resume-experiments.html#cb270-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="cn">TRUE</span> <span class="cn">FALSE</span>  <span class="cn">TRUE</span></span></code></pre></div>
<p>Then, just like with vectors, if we use this logical statement to subset, we will only retrieve observations such that the statement is TRUE. In this case, this statement is TRUE for the first and third observation:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="resume-experiments.html#cb271-1" aria-hidden="true" tabindex="-1"></a>students[students<span class="sc">$</span>school<span class="sc">==</span><span class="st">"UCSD"</span>,]</span>
<span id="cb271-2"><a href="resume-experiments.html#cb271-2" aria-hidden="true" tabindex="-1"></a>  school graduationdate</span>
<span id="cb271-3"><a href="resume-experiments.html#cb271-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   UCSD           <span class="dv">2010</span></span>
<span id="cb271-4"><a href="resume-experiments.html#cb271-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   UCSD           <span class="dv">2015</span></span></code></pre></div>
<p>Indexing data frames and vectors in this way is a useful skill that will be portable to other software programs that you may encounter in your future. However, in R, there is often easier solutions to subsetting data. For example, the function <code>subset</code> is often used to subset data frames. When we learn about the <code>tidyverse</code> in a future chapter, there will be a function that is again useful for subsetting.</p>
<p>The general syntax for the subset command is:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="resume-experiments.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, logical statement)</span></code></pre></div>
<p>The resulting data frame will be a subset of the data frame named <code>df</code> restricted only to the observations for which the logical statement after the comma is TRUE. For example, to create a data frame of UCSD students, we could type:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="resume-experiments.html#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(students,students<span class="sc">$</span>school<span class="sc">==</span><span class="st">"UCSD"</span>)</span>
<span id="cb273-2"><a href="resume-experiments.html#cb273-2" aria-hidden="true" tabindex="-1"></a>  school graduationdate</span>
<span id="cb273-3"><a href="resume-experiments.html#cb273-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>   UCSD           <span class="dv">2010</span></span>
<span id="cb273-4"><a href="resume-experiments.html#cb273-4" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>   UCSD           <span class="dv">2015</span></span></code></pre></div>
<p>Remember, to save this data frame as a new object in R, you will need to assign it a name.</p>
<div class="sourceCode" id="cb274"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ucsd_students</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">students</span>,<span class="va">students</span><span class="op">$</span><span class="va">school</span><span class="op">==</span><span class="st">"UCSD"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="conclusion-4" class="section level2" number="6.10">
<h2>
<span class="header-section-number">6.10</span> Conclusion<a class="anchor" aria-label="anchor" href="#conclusion-4"><i class="fas fa-link"></i></a>
</h2>
<p>Now, let's put everything that we've learned in this chapter together to study discrimination in hiring practices. To get started, let's load in the resume data.</p>
<div class="sourceCode" id="cb275"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resume</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"resume.csv"</span><span class="op">)</span></span></code></pre></div>
<p>When we are exploring a new data frame, it is often helpful to get a sense of the variables and the values they take. Let's look at the first few observations in the data in order to remind ourselves what is in the data:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="resume-experiments.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(resume)</span>
<span id="cb276-2"><a href="resume-experiments.html#cb276-2" aria-hidden="true" tabindex="-1"></a>  X firstname    sex  race call</span>
<span id="cb276-3"><a href="resume-experiments.html#cb276-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">1</span>   Allison female white    <span class="dv">0</span></span>
<span id="cb276-4"><a href="resume-experiments.html#cb276-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">2</span>   Kristen female white    <span class="dv">0</span></span>
<span id="cb276-5"><a href="resume-experiments.html#cb276-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">3</span>   Lakisha female black    <span class="dv">0</span></span>
<span id="cb276-6"><a href="resume-experiments.html#cb276-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">4</span>   Latonya female black    <span class="dv">0</span></span>
<span id="cb276-7"><a href="resume-experiments.html#cb276-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">5</span>    Carrie female white    <span class="dv">0</span></span>
<span id="cb276-8"><a href="resume-experiments.html#cb276-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="dv">6</span>       Jay   male white    <span class="dv">0</span></span></code></pre></div>
<p>Our main outcome of interest is whether an individual received a callback for an interview. In the data frame, a 0 represents the resume did not get a callback. A 1 represents the resume did get a callback. Because the data is stored in this way, we can simply take the average of the variable call in order to retrieve the overall callback rate:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="resume-experiments.html#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume<span class="sc">$</span>call)</span>
<span id="cb277-2"><a href="resume-experiments.html#cb277-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.08049281</span></span></code></pre></div>
<p>Remember, whenever we specify a variable, we need to specify both the data frame as well as the variable name. As well will see later, it is often helpful to have multiple data frames loaded into memory in R.</p>
<p>In this experiment, we want to understand whether the callback rate varies by race. Before proceeding, let's look at the distribution of race across applications:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="resume-experiments.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(resume<span class="sc">$</span>race)</span>
<span id="cb278-2"><a href="resume-experiments.html#cb278-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-3"><a href="resume-experiments.html#cb278-3" aria-hidden="true" tabindex="-1"></a>black white </span>
<span id="cb278-4"><a href="resume-experiments.html#cb278-4" aria-hidden="true" tabindex="-1"></a> <span class="dv">2435</span>  <span class="dv">2435</span> </span></code></pre></div>
<p>There are 2435 resumes with white-sounding names and 2435 resumes with Black-sounding names. Remember, these are fictitious resumes, and the experimenters designed the study so that there would be an equal number of applications for white and Black applicants.</p>
<p>Note, we could retrieve the same information using logic. When we type a logical statement, R will return a logical object that is composed of <code>TRUE</code> and <code>FALSE</code>. Whenever R sees <code>TRUE</code> it interprets a 1, and whenever R sees <code>FALSE</code> it interprets a 0. For example, if we type:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="resume-experiments.html#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(resume<span class="sc">$</span>race<span class="sc">==</span><span class="st">"black"</span>)</span>
<span id="cb279-2"><a href="resume-experiments.html#cb279-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">2435</span></span></code></pre></div>
<p>We get a value of 2435. Why? Well, <code>resume$race=="black</code> is a vector of length 4870. Half of the elements are <code>TRUE</code> while the other half are <code>FALSE</code>. The <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code> function adds up all the values of a vector. All the <code>TRUE</code> values are equal to 1 and all of the <code>FALSE</code> values are equal to zero. Therefore, it is simply counting up all the applications for which the statement is <code>TRUE</code>.</p>
<p>Now, let's get to the main analysis, which studies whether callback rates vary by race. To do so, let's first find the callback rate for applicants with Black-sounding names. To do this, we will again utilize logic:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="resume-experiments.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume<span class="sc">$</span>call[resume<span class="sc">$</span>race<span class="sc">==</span><span class="st">"black"</span>])</span>
<span id="cb280-2"><a href="resume-experiments.html#cb280-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.06447639</span></span></code></pre></div>
<p>Here we are using indexing. <code>[resume$race="black"]</code> subsets to Black applicants. Because we have put this inside <code>mean(resume$call[])</code>, then R will retrieve the average of the <code>resume$call</code> vector, but restrict to Black applicants. As we can see, about 6.4 percent of Black applicants receive a callback.</p>
<p>Let's now compare this to white applicants:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="resume-experiments.html#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume<span class="sc">$</span>call[resume<span class="sc">$</span>race<span class="sc">==</span><span class="st">"white"</span>])</span>
<span id="cb281-2"><a href="resume-experiments.html#cb281-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.09650924</span></span></code></pre></div>
<p>Before interpreting these findings, it is helpful to point out that there are a couple of different ways we could have performed the analysis. For example, sometimes it is helpful to generate different data frames for subsets of your data. We could have done this through indexing or through the <code>subset</code> function:</p>
<p>For example, to create a data frame restricted to Black applicants we could type:</p>
<div class="sourceCode" id="cb282"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resume_blacknames</span> <span class="op">&lt;-</span> <span class="va">resume</span><span class="op">[</span><span class="va">resume</span><span class="op">$</span><span class="va">race</span><span class="op">==</span><span class="st">"black"</span>,<span class="op">]</span></span>
<span><span class="va">resume_whitenames</span> <span class="op">&lt;-</span> <span class="va">resume</span><span class="op">[</span><span class="va">resume</span><span class="op">$</span><span class="va">race</span><span class="op">==</span><span class="st">"white"</span>,<span class="op">]</span></span></code></pre></div>
<p>Then, to calculate the callback rate for Black applicants, we should just reference this data frame:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="resume-experiments.html#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume_blacknames<span class="sc">$</span>call)</span>
<span id="cb283-2"><a href="resume-experiments.html#cb283-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.06447639</span></span>
<span id="cb283-3"><a href="resume-experiments.html#cb283-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(resume_whitenames<span class="sc">$</span>call)</span>
<span id="cb283-4"><a href="resume-experiments.html#cb283-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="fl">0.09650924</span></span></code></pre></div>
<p>Now that we have performed the main analysis, let's summarize our findings. Around 9.7 percent of white applicants receive a callback, while only 6.4 percent of Black applicants receive a callback. Therefore, there is a 3.3 percentage point disparity in callback rates. This is a substantial disparity. The baseline callback rates are quite low in this setting. A 3.3 percentage point disparity implies white applicants are more than 50 percent more likely to receive a callback relative to Black applicants:</p>
<p><span class="math display">\[
\text{Percent Increase in Callbacks for White Apps}=\frac{9.7-6.4}{6.4}=0.516
\]</span>
This highlights a stark disparity in labor-market outcomes. And given the empirical design: randomizing race across applications, these disparities cannot be driven by other factors that employers take into account when making hiring decisions. They are due to the names associated with the applications, and how those names proxy for race.</p>
<p>This empirical design has become widely popular. It has been used to study discrimination across other demographics, for example, gender, sexual orientation, and disability status. It has also increased in scope, with recent experiments sending out thousands and thousands of fictitious resumes in order to understand discrimination at some of the largest employers in the U.S (see Kline, Rose, and Walters 2022).<span class="citation"><a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Patrick M Kline, Evan K Rose, and Christopher R Walters, &lt;span&gt;“Systemic Discrimination Among Large US Employers,”&lt;/span&gt; &lt;em&gt;Quarterly Journal of Economics&lt;/em&gt;, 2022.&lt;/p&gt;"><sup>10</sup></a></span></p>
</div>
<div id="function-descriptions" class="section level2 unnumbered">
<h2>
<u>Function Descriptions</u><a class="anchor" aria-label="anchor" href="#function-descriptions"><i class="fas fa-link"></i></a>
</h2>
<div class="rmdnote">
<p><strong><u>Setup Functions</u></strong></p>
<ul>
<li><p><code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> –- retrieves the current working directory</p></li>
<li><p><code>setwd("pathname")</code> -- sets the working directory to whatever is contained in pathname. For example, if I type <code>setwd("Users/davidarnold/Desktop")</code>, then my working directory will be set to my desktop.</p></li>
<li><p><code>&lt;-</code> -- this is called the assignment operator. It assigns some value to an object. This can be used to create numeric objects, character objects, vectors, as well as dataframes.</p></li>
<li><p><code>read.csv(csvfile.csv)</code> -- reads in a csv file into R. To save the csv file as a dataframe, assign it a name. <code>df &lt;- read.csv("csvfile.csv")</code></p></li>
</ul>
<p><strong><u>Data Exploration Commands</u></strong></p>
<ul>
<li><p><code><a href="https://rdrr.io/r/base/nrow.html">nrow()</a></code> -- retrieves number of rows in a data frame.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/nrow.html">ncol()</a></code> -- retrieves number of columns in a dataframe</p></li>
<li><p><code>summary(dataframe)</code> - lists all variables in the dataframe. For numeric variables, computes some key quantiles.</p></li>
<li><p><code>names(dataframe)</code> - retrieves names of all columns in the dataframe</p></li>
<li><p><code>mean(dataframe$varname)</code> -- retrives the mean value of <code>varname</code> which is a variable inside the data frame <code>dataframe</code>.</p></li>
<li><p><code>table(dataframe$varname)</code> -- retrieves a table of frequencies for the variable <code>varname</code> within the data frame <code>dataframe</code>. This can be used for string variables as well as categorical variables.</p></li>
</ul>
</div>

</div>
</div>

<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script><div class="chapter-nav">
<div class="prev"><a href="legacy-of-colonial-medicine.html"><span class="header-section-number">5</span> Legacy of Colonial Medicine</a></div>
<div class="next"><a href="the-rug-rat-race.html"><span class="header-section-number">7</span> The Rug Rat Race</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#resume-experiments"><span class="header-section-number">6</span> Resume Experiments</a></li>
<li><a class="nav-link" href="#correspondence-studies"><span class="header-section-number">6.1</span> Correspondence Studies</a></li>
<li><a class="nav-link" href="#installing-rrstudio"><span class="header-section-number">6.2</span> Installing R/RStudio</a></li>
<li><a class="nav-link" href="#rstudio-interface"><span class="header-section-number">6.3</span> RStudio Interface</a></li>
<li><a class="nav-link" href="#objects"><span class="header-section-number">6.4</span> Objects</a></li>
<li><a class="nav-link" href="#working-directory-1"><span class="header-section-number">6.5</span> Working Directory</a></li>
<li><a class="nav-link" href="#dataframes"><span class="header-section-number">6.6</span> Dataframes</a></li>
<li><a class="nav-link" href="#logic"><span class="header-section-number">6.7</span> Logic</a></li>
<li><a class="nav-link" href="#subsetting-vectors"><span class="header-section-number">6.8</span> Subsetting Vectors</a></li>
<li><a class="nav-link" href="#subsetting-data-frames"><span class="header-section-number">6.9</span> Subsetting Data Frames</a></li>
<li><a class="nav-link" href="#conclusion-4"><span class="header-section-number">6.10</span> Conclusion</a></li>
<li><a class="nav-link" href="#function-descriptions">Function Descriptions</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Econ5/Poli5D</strong>" was written by David Arnold. It was last built on 2023-02-19.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
