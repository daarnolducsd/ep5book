install.packages("gifski")
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Desktop")
xstart <- c(1,2,3,4,5,6,7,8,9,10)
ystart <- 0.2*log(xstart)+1
xend <- log(xstart)
yend <- ystart
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
geom_smooth(method="lm",se=FALSE) +
xlim(0,10) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Log Transformation of X") +
# Here comes the gganimate code
transition_states(step) +
enter_fade() +
exit_shrink()
anim_save("logtransform.gif", goo)
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Desktop")
xstart <- c(1,2,3,4,5,6,7,8,9,10)
ystart <- 0.2*log(xstart)+1
xend <- log(xstart)
yend <- ystart
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
geom_smooth(method="lm",se=FALSE) +
xlim(0,10) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Log Transformation of X") +
# Here comes the gganimate code
transition_states(step) +
enter_fade() +
exit_shrink()
animate(goo, nframes = 300, fps = 5, end_pause = 20,renderer=gifski_renderer("test.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,2,3,4,5,6,7,8,9,10)
ystart <- 0.2*log(xstart)+1
xend <- log(xstart)
yend <- ystart
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
geom_smooth(method="lm",se=FALSE) +
xlim(0,10) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Log Transformation of X") +
# Here comes the gganimate code
transition_states(step) +
enter_fade() +
exit_shrink()
animate(goo, nframes = 100, fps = 5, end_pause = 4,renderer=gifski_renderer("log.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,2,3,4,5,6,7,8,9,10)
ystart <- 0.2*log(xstart)+1
xend <- log(xstart)
yend <- ystart
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
geom_smooth(method="lm",se=FALSE) +
xlim(0,10) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Log Transformation of X") +
# Here comes the gganimate code
transition_states(step) +
enter_fade() +
exit_shrink()
animate(goo, nframes = 100, fps = 10, end_pause = 4,renderer=gifski_renderer("log.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,2,3,4,5,6,7,8,9,10)
ystart <- 0.2*log(xstart)+1
xend <- log(xstart)
yend <- ystart
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
geom_smooth(method="lm",se=FALSE) +
xlim(0,10) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Log Transformation of X") +
# Here comes the gganimate code
transition_states(step) +
enter_fade()
animate(goo, nframes = 100, fps = 10, end_pause = 4,renderer=gifski_renderer("log.gif"))
xstart <- c(1,1,1,1,1,1,1,1,1,1)
ystart <- c(1,1,1,1,1,1,1,1,1,1)
xnoise <- randu(0,0.02)
xnoise <- rnorm(length(xstart),0,0.1)
xstart <- c(1,1,1,1,1,1,1,1,1,1)
ystart <- c(1,1,1,1,1,1,1,1,1,1)
xnoise <- rnorm(length(xstart),0,0.1)
ynoise <- rnorm(length(xstart),0,0.1)
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,1,1,1,1,1,1,1,1,1)
ystart <- c(1,1,1,1,1,1,1,1,1,1)
xnoise <- rnorm(length(xstart),0,0.1)
ynoise <- rnorm(length(xstart),0,0.1)
xend <- xstart + xnoise
yend <- ystart + ynoise
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
xlim(0,2) +
ylim(0,2) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Example of Jitter") +
# Here comes the gganimate code
transition_states(step) +
enter_fade()
animate(goo, nframes = 100, fps = 10, end_pause = 4,renderer=gifski_renderer("jitter.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,1,1,1,1,1,1,1,1,1)
ystart <- c(1,1,1,1,1,1,1,1,1,1)
xnoise <- rnorm(length(xstart),0,0.1)
ynoise <- rnorm(length(xstart),0,0.1)
xend <- xstart + xnoise
yend <- ystart + ynoise
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
xlim(0,2) +
ylim(0,2) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Example of Jitter") +
theme_minimal() +
# Here comes the gganimate code
transition_states(step) +
enter_fade()
animate(goo, nframes = 100, fps = 10, end_pause = 4,renderer=gifski_renderer("jitter.gif"))
animate(goo, nframes = 100, fps = 10, end_pause = 4,renderer=gifski_renderer("logtransform.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,2,3,4,5,6,7,8,9,10)
ystart <- 0.2*log(xstart)+1
xend <- log(xstart)
yend <- ystart
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
geom_smooth(method="lm",se=FALSE) +
xlim(0,10) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Log Transformation of X") +
theme_minimal()+
# Here comes the gganimate code
transition_states(step) +
enter_fade()
animate(goo, nframes = 100, fps = 10, end_pause = 4,renderer=gifski_renderer("logtransform.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,1,1,1,1,1,1,1,1,1)
ystart <- c(1,1,1,1,1,1,1,1,1,1)
xnoise <- rnorm(length(xstart),0,0.1)
ynoise <- rnorm(length(xstart),0,0.1)
xend <- xstart + xnoise
yend <- ystart + ynoise
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
xlim(0,2) +
ylim(0,2) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Example of Jitter") +
theme_minimal() +
# Here comes the gganimate code
transition_states(step) +
enter_fade()
animate(goo, nframes = 300, fps = 30, end_pause = 4,renderer=gifski_renderer("jitter.gif"))
## Create a gif
rm(list=ls())
library(gifski)
library(gganimate)
setwd("/Users/davidarnold/Dropbox/Teaching/EP5Bookdown/gifs")
xstart <- c(1,1,1,1,1,1,1,1,1,1)
ystart <- c(1,1,1,1,1,1,1,1,1,1)
xnoise <- rnorm(length(xstart),0,0.1)
ynoise <- rnorm(length(xstart),0,0.1)
xend <- xstart + xnoise
yend <- ystart + ynoise
steps <- 2
xtotal <- rep(0,steps*length(xstart))
ytotal <- rep(0,steps*length(xstart))
step <- rep(0,steps*length(xstart))
xtotal[1:length(xstart)]=xstart
ytotal[1:length(ystart)]=ystart
step[1:length(xstart)]=1
index_x = length(xstart)+1
index_y = length(ystart)+1
for (i in 2:steps){
xtotal[index_x:(index_x+length(xstart)-1)]=xstart+(xend-xstart)*((i)/steps)
ytotal[index_y:(index_y+length(ystart)-1)]=ystart+ (yend-ystart)*((i)/steps)
step[index_x:(index_x+length(xstart)-1)]=i
index_x=index_x+length(xstart)
index_y=index_y+length(ystart)
}
newdf <- as.data.frame(cbind(xtotal,ytotal,step))
library(ggplot2)
library(gganimate)
library(transformr)
goo <- ggplot(newdf, aes(x=xtotal,y=ytotal)) +
geom_point() +
xlim(0,2) +
ylim(0,2) +
ylab("Y variable") +
xlab("X variable") +
ggtitle("Example of Jitter") +
theme_minimal() +
# Here comes the gganimate code
transition_states(step) +
enter_fade()
animate(goo, nframes = 100, fps = 20, end_pause = 4,renderer=gifski_renderer("jitter.gif"))
-557/6213
-1647/-2437
64485*0.054
(65585-3482.19)/(65585)
105+303
0.05*0.5
0.1*0.2
12/165
88/90
165-126
39/165
3+5+5+4
17/30
72+(74-44)+(70-51)+(70-56)
70*5
145*2+110
5/60
28.68847+4.72*log(40000,base=10)
28.68847+4.72*log(40000)
35/315
50/350
40/350
82.9-22.3
# Week 7 Part 1
# clear environment
rm(list=ls())
setwd("~/Dropbox/Teaching/EP5/slides/07_week")
##############
# For loops
##############
# Very inefficient coding example
# Print 2*i for i = 1:5
i <- 1
2*i
i <-2
2*i
i <-3
2*i
i <-4
2*i
i <-5
2*i
# Using a for-loop
for (i in 1:5) {
print(2*i)
}
for (i in 1:100){
print(2*i)
}
# Even if we increase iterations, code still works
## second example (looping through a vector)
vec <- c(3,10,99)
for (i in vec) {
print(2*i)
}
#
for (i in 1:length(vec)) {
print(2*vec[i])
}
## Ramey and Ramey (2010)
## Need to install tidyverse if you have not already done so
##install.packages("tidyverse")
library("tidyverse")
## load in rugrat race data normally
rr <- read.csv("rugratrace.csv")
## change it to a "tibble"
rr <- as_tibble(rr)
## use read_csv to read in directly as a tibble
rr <- read_csv("rugratrace.csv")
## filter() function
## we want to take a subset of the data
## that only includes mothers age 25-34
mothers2534<-filter(rr, age<=34 & age>=25 & mother2==1)
## the dataframe above has a number of variables we don't
## need. Use select() to find only the variables we need
mothers2534 <- select(mothers2534,age,childtot,mother2,dataset)
# Step 2: unique list of years
years <- unique(mothers2534$dataset)
# Step 3 + 4: iterate over each year and print mean childcare per week
for (i in 1:length(years)) {
sub <- filter(mothers2534,dataset==years[i])
mean(sub$childtot)
}
head(rr$mother2,rr$age,rr$childtot,rr$dataset)
head(rr$mother2)
head(rr$mother2,rr$father2)
